/workspace$ DATABASE_URL="postgresql://username:password@ep-holy-sunset-123456.eu-central-1.aws.neon.tech/neondb?sslmode=require" npm run db:push

> rest-express@1.0.0 db:push
> drizzle-kit push

No config path provided, using default 'drizzle.config.ts'
Reading config file '/home/runner/workspace/drizzle.config.ts'
Using 'pg' driver for database querying
[‚£∑] Pulling schema from database...
error: password authentication failed for user 'username'
    at /home/runner/workspace/node_modules/pg-pool/index.js:45:11
    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)
    at async Object.query (/home/runner/workspace/node_modules/drizzle-kit/bin.cjs:66575:26)
    at async fromDatabase2 (/home/runner/workspace/node_modules/drizzle-kit/bin.cjs:18700:25) {
  length: 71,
  severity: 'ERROR',
  code: 'XX000',
  detail: undefined,
  hint: undefined,
  position: undefined,
  internalPosition: undefined,
  internalQuery: undefined,
  where: undefined,
  schema: undefined,
  table: undefined,
  column: undefined,
  dataType: undefined,
  constraint: undefined,
  file: undefined,
  line: undefined,
  routine: undefined
}
~/workspace$ ^C
~/workspace$ source .env && npm run db:push

> rest-express@1.0.0 db:push
> drizzle-kit push

No config path provided, using default 'drizzle.config.ts'
Reading config file '/home/runner/workspace/drizzle.config.ts'
Using 'pg' driver for database querying
[‚úì] Pulling schema from database...
 Warning  Found data-loss statements:
¬∑ You're about to delete session table with 1 items

THIS ACTION WILL CAUSE DATA LOSS AND CANNOT BE REVERTED

Do you still want to push changes?
‚ùØ No, abort
  Yes, I want to remove 1 table, 
^C
[1]+  Done                    DATABASE_URL=postgresql://neondb_owner:npg_j0uJzebEPgs4@ep-lively-pine-adpu1pz9-pooler.c-2.us-east-1.aws.neon.tech/neondb?sslmode=require
~/workspace$ source .env && npx drizzle-kit push --force
[1]+  Done                    DATABASE_URL=postgresql://neondb_owner:npg_j0uJzebEPgs4@ep-lively-pine-adpu1pz9-pooler.c-2.us-east-1.aws.neon.tech/neondb?sslmode=require
No config path provided, using default 'drizzle.config.ts'
Reading config file '/home/runner/workspace/drizzle.config.ts'
Using 'pg' driver for database querying
[‚úì] Pulling schema from database...
[‚úì] Changes applied
~/workspace$ npm run start

> rest-express@1.0.0 start
> NODE_ENV=production node dist/index.js

[dotenv@17.2.1] injecting env (0) from .env -- tip: üîê prevent building .env in docker: https://dotenvx.com/prebuild
node:events:502
      throw er; // Unhandled 'error' event
      ^

Error: listen EADDRINUSE: address already in use 0.0.0.0:5000
    at Server.setupListenHandle [as _listen2] (node:net:1908:16)
    at listenInCluster (node:net:1965:12)
    at doListen (node:net:2139:7)
    at process.processTicksAndRejections (node:internal/process/task_queues:83:21)
Emitted 'error' event on Server instance at:
    at emitErrorNT (node:net:1944:8)
    at process.processTicksAndRejections (node:internal/process/task_queues:82:21) {
  code: 'EADDRINUSE',
  errno: -98,
  syscall: 'listen',
  address: '0.0.0.0',
  port: 5000
}

Node.js v20.19.3
~/workspace$ kill -9 $(lsof -t -i:5000)
bash: lsof: command not found
kill: usage: kill [-s sigspec | -n signum | -sigspec] pid | jobspec ... or kill -l [sigspec]
~/workspace$ npm run start

> rest-express@1.0.0 start
> NODE_ENV=production node dist/index.js

[dotenv@17.2.1] injecting env (0) from .env -- tip: ‚öôÔ∏è  override existing env vars with { override: true }
node:events:502
      throw er; // Unhandled 'error' event
      ^

Error: listen EADDRINUSE: address already in use 0.0.0.0:5000
    at Server.setupListenHandle [as _listen2] (node:net:1908:16)
    at listenInCluster (node:net:1965:12)
    at doListen (node:net:2139:7)
    at process.processTicksAndRejections (node:internal/process/task_queues:83:21)
Emitted 'error' event on Server instance at:
    at emitErrorNT (node:net:1944:8)
    at process.processTicksAndRejections (node:internal/process/task_queues:82:21) {
  code: 'EADDRINUSE',
  errno: -98,
  syscall: 'listen',
  address: '0.0.0.0',
  port: 5000
}

Node.js v20.19.3
~/workspace$ lsof -i:5000
lsof: command not installed, but was located via Nix.
package: lsof  4.99.4  Tool to list open files
Would you like to run lsof from Nix and add it to your project? [Yn]: Y
lsof  4.99.4  Tool to list open files
Adding lsof to .replit
COMMAND PID   USER FD   TYPE DEVICE SIZE/OFF NODE NAME
pid1      1 runner 58u  IPv4 430749      0t0  TCP 81bd3dd04fff:48810->81bd3dd04fff:5000 (ESTABLISHED)
node    638 runner 36u  IPv4 417721      0t0  TCP *:5000 (LISTEN)
node    638 runner 38u  IPv4 431846      0t0  TCP 81bd3dd04fff:5000->81bd3dd04fff:48810 (ESTABLISHED)
~/workspace$ ^C
~/workspace$ kill -9 638
~/workspace$ npm run start

> rest-express@1.0.0 start
> NODE_ENV=production node dist/index.js

[dotenv@17.2.1] injecting env (0) from .env -- tip: ‚öôÔ∏è  suppress all logs with { quiet: true }
‚úÖ IQR Control server running on http://0.0.0.0:5000
üë§ Login: admin / admin123
üíæ Database: Connected to Neon PostgreSQL
2:33:52 PM [express] serving on port 5000
2:33:56 PM [express] GET /api/auth/user 401 in 2ms :: {"message":"Unauthorized"}
2:33:56 PM [express] GET /api/auth/user 401 in 1ms :: {"message":"Unauthorized"}
2:34:02 PM [express] POST /api/auth/login 200 in 126ms :: {"id":"2bbc892b-888c-4442-8443-f3e6289f4ad‚Ä¶
2:34:02 PM [express] GET /api/dashboard/stats 304 in 29ms :: {"totalCustomers":0,"monthlyIncome":0,"‚Ä¶
2:34:02 PM [express] GET /api/activities 304 in 11ms :: []
2:34:08 PM [express] GET /api/users 200 in 17ms :: [{"id":"2bbc892b-888c-4442-8443-f3e6289f4ad8","em‚Ä¶
2:34:19 PM [express] GET /api/auth/user 200 in 23ms :: {"id":"2bbc892b-888c-4442-8443-f3e6289f4ad8",‚Ä¶
2:34:19 PM [express] GET /api/dashboard/stats 304 in 25ms :: {"totalCustomers":0,"monthlyIncome":0,"‚Ä¶
2:34:20 PM [express] GET /api/activities 304 in 14ms :: []
2:38:07 PM [express] GET /api/auth/user 304 in 74ms :: {"id":"2bbc892b-888c-4442-8443-f3e6289f4ad8",‚Ä¶
2:38:08 PM [express] GET /api/auth/user 304 in 16ms :: {"id":"2bbc892b-888c-4442-8443-f3e6289f4ad8",‚Ä¶
2:38:08 PM [express] GET /api/dashboard/stats 304 in 39ms :: {"totalCustomers":0,"monthlyIncome":0,"‚Ä¶
2:38:08 PM [express] GET /api/auth/user 304 in 37ms :: {"id":"2bbc892b-888c-4442-8443-f3e6289f4ad8",‚Ä¶
2:38:08 PM [express] GET /api/activities 304 in 53ms :: []
2:38:08 PM [express] GET /api/activities 304 in 13ms :: []
2:38:08 PM [express] GET /api/dashboard/stats 304 in 29ms :: {"totalCustomers":0,"monthlyIncome":0,"‚Ä¶
2:38:09 PM [express] GET /api/activities 304 in 14ms :: []
2:38:09 PM [express] GET /api/dashboard/stats 304 in 20ms :: {"totalCustomers":0,"monthlyIncome":0,"‚Ä¶
Killed
~/workspace$ ^C
~/workspace$ 